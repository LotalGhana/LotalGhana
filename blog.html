<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Updates - LOTAL GHANA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Blog posts from Alexander Antobre of Lotal Ghana">
  <meta name="theme-color" content="#0c4b8e" />
  <link rel="icon" href="icons/LotalGhana.jpg" type="image/png">
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script>
    // ✅ Use the SAME Firebase config as admin.html
    const firebaseConfig = {
      apiKey: "AIzaSyARq-cvXbo6y6aWUQwJ-D9vGHukLRCKd7s",
      authDomain: "lotalghanacms.firebaseapp.com",
      projectId: "lotalghanacms",
      storageBucket: "lotalghanacms.appspot.com",
      messagingSenderId: "1059279214193",
      appId: "1:1059279214193:web:a8f10ab98ffb3c90576dd0"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ✅ Load blog posts from Firestore
    function loadBlogPosts() {
      db.collection("posts").orderBy("createdAt", "desc").get()
        .then(snapshot => {
          const wrapper = document.getElementById("blogWrapper");
          wrapper.innerHTML = "";
          
          if (snapshot.empty) {
            wrapper.innerHTML = "<p>No posts available yet.</p>";
            return;
          }

          snapshot.forEach(doc => {
            const post = doc.data();
            const snippet = post.content 
              ? post.content.substring(0, 120) + "..." 
              : "No content available";

            const imgSrc = post.imageUrl 
              ? post.imageUrl 
              : "https://via.placeholder.com/300x180?text=No+Image";

            const postHTML = `
              <div class="blog-card">
                <img src="${imgSrc}" alt="${post.title}">
                <div class="content">
                  <h3>${post.title}</h3>
                  <p>${snippet}</p>
                  <a href="viewpost.html?id=${doc.id}">Read More</a>
                </div>
              </div>
            `;
            wrapper.innerHTML += postHTML;
          });
        })
        .catch(err => {
          document.getElementById("blogWrapper").innerHTML = "<p>Error loading posts.</p>";
          console.error("Error fetching Firestore posts:", err);
        });
    }

    window.addEventListener("DOMContentLoaded", loadBlogPosts);
  </script>

  <style>
    /* Quick styling for blog cards */
    .blog-card {
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      margin: 20px auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      max-width: 700px;
    }
    .blog-card img {
      width: 100%;
      height: auto;
      display: block;
    }
    .blog-card .content {
      padding: 15px;
    }
    .blog-card h3 {
      margin: 0 0 10px;
    }
    .blog-card p {
      color: #444;
    }
    .blog-card a {
      display: inline-block;
      margin-top: 10px;
      color: #b00020;
      text-decoration: none;
      font-weight: bold;
    }
    .blog-card a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <!-- Floating Social Bar -->
  <div class="floating-social-bar">
    <a href="https://facebook.com/lotalghana" target="_blank" class="social facebook"><i class="fab fa-facebook-f"></i></a>
    <a href="https://twitter.com/lotalghana" target="_blank" class="social twitter"><i class="fab fa-twitter"></i></a>
    <a href="https://instagram.com/lotalghana" target="_blank" class="social instagram"><i class="fab fa-instagram"></i></a>
    <a href="https://youtube.com/@lotalghana" target="_blank" class="social youtube"><i class="fab fa-youtube"></i></a>
  </div>

  <!-- Header -->
  <header>
    <div class="logo">LOTAL GHANA</div>
    <div class="menu-toggle" onclick="toggleMenu()">☰</div>
    <nav id="sidebar">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="blog.html">Updates</a></li>
        <li><a href="services.html">Services</a></li>
        <li><a href="consult.html">Consult</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
  </header>

  <!-- Blog Posts -->
  <section id="blog-list">
    <div class="blog-wrapper" id="blogWrapper">
      <p>Loading posts...</p>
    </div>
  </section>

  <!-- Footer -->
   <footer>
  <div class="social-links">
    <a href="https://facebook.com/lotalghana" target="_blank" class="facebook"><i class="fab fa-facebook-f"></i></a>
    <a href="https://twitter.com/lotalghana" target="_blank" class="twitter"><i class="fab fa-twitter"></i></a>
    <a href="https://instagram.com/lotalghana" target="_blank" class="instagram"><i class="fab fa-instagram"></i></a>
    <a href="https://youtube.com/@lotalghana" target="_blank" class="youtube"><i class="fab fa-youtube"></i></a>
  </div>

  <div class="footer-links">
    <a href="index.html">Home</a> | 
    <a href="about.html">About</a> | 
    <a href="privacy.html">Privacy Policy</a>
  </div>

  <p>&copy; 2025 LOTAL GHANA. All Rights Reserved</p>
</footer>

  <script>
    function toggleMenu() {
      document.getElementById("sidebar").classList.toggle("open");
    }
  </script>
</body>
</html>
